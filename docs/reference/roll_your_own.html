<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute Custom Network Statistics — roll_your_own • BGGM</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Custom Network Statistics — roll_your_own"><meta name="description" content="This function allows for computing custom network statistics for
weighted adjacency matrices (partial correlations). The statistics are computed for
each of the sampled matrices, resulting in a distribution."><meta property="og:description" content="This function allows for computing custom network statistics for
weighted adjacency matrices (partial correlations). The statistics are computed for
each of the sampled matrices, resulting in a distribution."><meta property="og:image" content="https://rast-lab.github.io/BGGM/reference/figures/hex.jpg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">BGGM</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/index.html">Vignettes</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rast-lab/BGGM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Compute Custom Network Statistics</h1>
      <small class="dont-index">Source: <a href="https://github.com/rast-lab/BGGM/blob/HEAD/R/roll_your_own.R" class="external-link"><code>R/roll_your_own.R</code></a></small>
      <div class="d-none name"><code>roll_your_own.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function allows for computing custom network statistics for
weighted adjacency matrices (partial correlations). The statistics are computed for
each of the sampled matrices, resulting in a distribution.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">roll_your_own</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">FUN</span>,</span>
<span>  iter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  select <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cred <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  progress <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p>An object of class <code>estimate</code>.</p></dd>


<dt id="arg-fun">FUN<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>A custom function for computing the statistic. The first argument must be
a partial correlation matrix.</p></dd>


<dt id="arg-iter">iter<a class="anchor" aria-label="anchor" href="#arg-iter"></a></dt>
<dd><p>Number of iterations (posterior samples; defaults to the number in the object).</p></dd>


<dt id="arg-select">select<a class="anchor" aria-label="anchor" href="#arg-select"></a></dt>
<dd><p>Logical. Should the graph be selected ? The default is currently <code>FALSE</code>.</p></dd>


<dt id="arg-cred">cred<a class="anchor" aria-label="anchor" href="#arg-cred"></a></dt>
<dd><p>Numeric. Credible interval between 0 and 1  (default is 0.95) that is used for selecting the graph.</p></dd>


<dt id="arg-progress">progress<a class="anchor" aria-label="anchor" href="#arg-progress"></a></dt>
<dd><p>Logical. Should a progress bar be included (defaults to <code>TRUE</code>) ?</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Arguments passed to the function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object defined by <code>FUN</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The user has complete control of this function. Hence, care must be taken as to what <code>FUN</code>
returns and in what format. The function should return a single number (one for the entire GGM)
or a vector (one for each node). This ensures that the print and <code><a href="plot.roll_your_own.html">plot.roll_your_own</a></code>
will work.</p>

<p>When <code>select = TRUE</code>, the graph is selected and then the network statistics are computed based on
the weigthed adjacency matrix. This is accomplished internally by multiplying each of the sampled
partial correlation matrices by the adjacency matrix.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co">####################################</span></span></span>
<span class="r-in"><span><span class="co">###### example 1: assortment #######</span></span></span>
<span class="r-in"><span><span class="co">####################################</span></span></span>
<span class="r-in"><span><span class="co"># assortment</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">assortnet</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="fu">BGGM</span><span class="fu">::</span><span class="va"><a href="bfi.html">bfi</a></span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">membership</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fit model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="estimate.html">estimate</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="va">Y</span>, iter <span class="op">=</span> <span class="fl">250</span>,</span></span>
<span class="r-in"><span>                progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># membership</span></span></span>
<span class="r-in"><span><span class="va">membership</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="fl">5</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"c"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define function</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">...</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/pkg/assortnet/man/assortment.discrete.html" class="external-link">assortment.discrete</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span><span class="op">$</span><span class="va">r</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">net_stat</span> <span class="op">&lt;-</span> <span class="fu">roll_your_own</span><span class="op">(</span>object <span class="op">=</span> <span class="va">fit</span>,</span></span>
<span class="r-in"><span>                          FUN <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                          types <span class="op">=</span> <span class="va">membership</span>,</span></span>
<span class="r-in"><span>                          weighted <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                          SE <span class="op">=</span> <span class="cn">FALSE</span>, M <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>                          progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># print</span></span></span>
<span class="r-in"><span><span class="va">net_stat</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> BGGM: Bayesian Gaussian Graphical Models </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Network Stats: Roll Your Own</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Posterior Samples: 250 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimates: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Post.mean Post.sd Cred.lb Cred.ub</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      0.349   0.106   0.118   0.535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> --- </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">############################################</span></span></span>
<span class="r-in"><span><span class="co">###### example 2: expected influence #######</span></span></span>
<span class="r-in"><span><span class="co">############################################</span></span></span>
<span class="r-in"><span><span class="co"># expected influence from this package</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=networktools" class="external-link">networktools</a></span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Registered S3 method overwritten by 'Hmisc':</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   method          from</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   summary.formula ergm</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Registered S3 methods overwritten by 'networktools':</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   method         from          </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   print.bridge   bridgesampling</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   summary.bridge bridgesampling</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># data</span></span></span>
<span class="r-in"><span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">depression</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># fit model</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="estimate.html">estimate</a></span><span class="op">(</span>Y <span class="op">=</span> <span class="va">Y</span>, iter <span class="op">=</span> <span class="fl">250</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> BGGM: Posterior Sampling </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> BGGM: Finished</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># define function</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>,<span class="va">...</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>     <span class="fu"><a href="https://rdrr.io/pkg/networktools/man/expectedInf.html" class="external-link">expectedInf</a></span><span class="op">(</span><span class="va">x</span>,<span class="va">...</span><span class="op">)</span><span class="op">$</span><span class="va">step1</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># compute</span></span></span>
<span class="r-in"><span><span class="va">net_stat</span> <span class="op">&lt;-</span> <span class="fu">roll_your_own</span><span class="op">(</span>object <span class="op">=</span> <span class="va">fit</span>,</span></span>
<span class="r-in"><span>                          FUN <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                          progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#######################################</span></span></span>
<span class="r-in"><span><span class="co">### example 3: mixed data &amp; bridge ####</span></span></span>
<span class="r-in"><span><span class="co">#######################################</span></span></span>
<span class="r-in"><span><span class="co"># bridge from this package</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://CRAN.R-project.org/package=networktools" class="external-link">networktools</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># data</span></span></span>
<span class="r-in"><span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">ptsd</span><span class="op">[</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="estimate.html">estimate</a></span><span class="op">(</span><span class="va">Y</span>,</span></span>
<span class="r-in"><span>                type <span class="op">=</span> <span class="st">"mixed"</span>,</span></span>
<span class="r-in"><span>                iter <span class="op">=</span> <span class="fl">250</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> BGGM: Posterior Sampling </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> BGGM: Finished</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># clusters</span></span></span>
<span class="r-in"><span><span class="va">communities</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/substr.html" class="external-link">substring</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">Y</span><span class="op">)</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># function is slow</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/pkg/networktools/man/bridge.html" class="external-link">bridge</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span><span class="op">$</span><span class="va">`Bridge Strength`</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">net_stat</span> <span class="op">&lt;-</span> <span class="fu">roll_your_own</span><span class="op">(</span><span class="va">fit</span>,</span></span>
<span class="r-in"><span>                          FUN <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                          select <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                          communities <span class="op">=</span> <span class="va">communities</span>,</span></span>
<span class="r-in"><span>                          progress <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Donald Williams, Joris Mulder, Philippe Rast.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer></div>





  </body></html>

